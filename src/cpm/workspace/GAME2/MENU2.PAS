program MenuV2;type mStr = string[255];{$I XTSYATLJ.INC} {Joypad include}const sc_width = 53; { main screen dims } sc_height = 16;  nbItems = 4;var choiceCh : char; direction : integer; button : integer; items : array[1..nbItems] of string[10]; i: integer; curItem : integer; sure: boolean;procedure DrawBox(X1,Y1,X2,Y2: Integer); var I: Integer;  begin    GotoXY(X1, Y1);    for I := X1 to X2 do write ( '~' );    for I := Y1+1 to Y2 do      begin        GotoXY(X1,I); Write('|');        GotoXY(X2,I); Write('|');      end;    GotoXY(X1,Y2);   for I := X1 to X2 do Write('~');    GotoXY(X1,Y1); Write('O');   GotoXY(X2,Y1); Write('\');   GotoXY(X1,Y2); Write('\');   GotoXY(X2,Y2); Write('O'); end;procedure initMenu;begin  {            1234567890}  items[1] := 'New Game';  items[2] := 'Load Game';  items[3] := 'ItemPedia';  items[4] := 'Exit';  curItem := 1;end;function confirmBox(msg: mStr) : boolean;var x,y,w,h : integer; button : integer; direction : integer; value : boolean; begin repeat   pollJoypad;   button    := getJoyBtn; until ( button = 0 );   w := length( msg ) + 4;  h := 4;  x := (sc_width - w) div 2;  y := (sc_height - h) div 2;   drawBox( x, y, x+w-1, y+h-1 );   GotoXY(x+2, y+1); write( msg );  {                         0123456}  GotoXY(x+2, y+2); write( '  No   Yes ' );  value := false;    repeat    if not value then    begin     GotoXY(x+2, y+2); write( '>' );     GotoXY(x+2+5, y+2); write( ' ' );    end    else    begin     GotoXY(x+2, y+2); write( ' ' );     GotoXY(x+2+5, y+2); write( '>' );    end;        pollJoypad;    button    := getJoyBtn;    direction := getJoyDir;    if ( direction = RIGHT ) then value := true    else if ( direction = LEFT ) then value := false;    bDelay(50);  until ( button <> 0 );    repeat   pollJoypad;   button    := getJoyBtn;  until ( button = 0 );   confirmBox := value;end;begin initMenu; ClrScr; repeat    choiceCh := '*';        if ( KeyPressed ) then        Read(Kbd,choiceCh);            pollJoypad;        direction := getJoyDir;    button    := getJoyBtn;        for i:= 1 to nbItems do     begin      GotoXY( 5-2, 5+i-1 );      ClrEol;      write('  ');      Writeln( items[i] );    end;        GotoXY( 5-2, 5+curItem-1 );    write('>');        DrawBox( 3-1, 3, 3+12, 3+2+nbItems+1 );        if (direction = UP) then curItem := curItem - 1    else if (direction = DOWN) then curItem := curItem + 1;        if ( curItem < 1 ) then curItem := nbItems    else if ( curItem > nbItems ) then curItem := 1;        bDelay( 200 );         until ( choiceCh = 'q' ) or ( button = B1 ); GotoXY(3, 20); writeln( items[ curItem ] ); sure := confirmBox('Are your Sure ?'); GotoXY(3, 21);end.